<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test</title>
</head>
<body>
    <h1>API Debug Test</h1>
    
    <div>
        <h2>Demo Login Test</h2>
        <button id="demo-login-btn">Demo Login</button>
        <div id="demo-result"></div>
    </div>
    
    <div>
        <h2>Get Stats Test</h2>
        <button id="stats-btn">Get Stats</button>
        <div id="stats-result"></div>
    </div>
    
    <div>
        <h2>Get Random Study Books Test</h2>
        <button id="random-books-btn">Get Random Books</button>
        <div id="random-books-result"></div>
    </div>
    
    <div>
        <h2>Create Study Book Test</h2>
        <button id="create-book-btn">Create Study Book</button>
        <div id="create-book-result"></div>
    </div>

    <script src="js/api.js"></script>
    <script>
        document.getElementById('demo-login-btn').addEventListener('click', async () => {
            try {
                console.log('Testing demo login...');
                const result = await rctApi.demoLogin();
                document.getElementById('demo-result').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
                console.log('Demo login success:', result);
            } catch (error) {
                console.error('Demo login error:', error);
                document.getElementById('demo-result').innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
            }
        });

        document.getElementById('stats-btn').addEventListener('click', async () => {
            try {
                console.log('Testing get stats...');
                const result = await rctApi.getStats();
                document.getElementById('stats-result').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
                console.log('Get stats success:', result);
            } catch (error) {
                console.error('Get stats error:', error);
                document.getElementById('stats-result').innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
            }
        });

        document.getElementById('random-books-btn').addEventListener('click', async () => {
            try {
                console.log('Testing get random books...');
                const result = await rctApi.getRandomStudyBooks('Java', 1);
                document.getElementById('random-books-result').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
                console.log('Get random books success:', result);
            } catch (error) {
                console.error('Get random books error:', error);
                document.getElementById('random-books-result').innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
            }
        });

        document.getElementById('create-book-btn').addEventListener('click', async () => {
            try {
                console.log('Testing create study book...');
                const result = await rctApi.createStudyBook('JavaScript', 'console.log("Hello World");', 'JavaScriptでHello Worldを出力する基本的なコード');
                document.getElementById('create-book-result').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
                console.log('Create study book success:', result);
            } catch (error) {
                console.error('Create study book error:', error);
                document.getElementById('create-book-result').innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
            }
        });
    </script>
</body>
</html>